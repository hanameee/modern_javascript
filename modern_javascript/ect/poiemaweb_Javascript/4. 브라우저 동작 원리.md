# [4. 브라우저 동작 원리](https://poiemaweb.com/coding)

출처 : [poiemaweb](https://poiemaweb.com/)

대부분의 프로그래밍 언어는 운영체제(OS) 위에서 실행되지만, 웹 애플리케이션의 자바스크립트는 브라우저에서 HTML/CSS와 함께 실행된다. 따라서 브라우저 환경을 고려할 때 보다 효율적인 자바스크립트 프로그래밍이 가능하다.

- 브라우저의 핵심기능은?
  사용자가 참조하고자 하는 **웹페이지를 서버에 요청(Request)하고 서버의 응답(Response)을 받아 브라우저에 표시**하는 것

- 브라우저의 동작 원리
- ![브라우저 동작 원리](https://poiemaweb.com/img/client-server.png)
  - 브라우저는 서버로부터 HTML, CSS, Javascript, 이미지 파일 등을 응답받음
  - HTML, CSS 파일은 **렌더링 엔진**의 HTML 파서와 CSS 파서에 의해 파싱(Parsing)되어 DOM, CSSOM 트리로 변환되고 렌더 트리로 결합되며, 이렇게 생성된 렌더 트리를 기반으로 브라우저는 웹페이지를 표시함
  - 자바스크립트는 렌더링 엔진이 아닌 **자바스크립트 엔진**이 처리함. HTML 파서는 `<script>` 태그를 만나면 자바스크립트 코드를 실행하기 위해 DOM 생성 프로세스를 중지하고 자바스크립트 엔진으로 제어 권한을 넘김
  - 제어 권한을 넘겨받은 자바스크립트 엔진은 `<script>` 태그 내의 자바스크립트 코드, 또는  `<script>` 태그의 src 속성에 정의된 자바스크립트 파일을 로드하고 파싱하여 실행함. 자바스크립트의 실행이 완료되면 다시 HTML 파서로 제어 권한을 넘겨 브라우저가 중지했던 시점부터 DOM 생성을 재개함

위와 같이 브라우저는 **동기적**으로 HTML, CSS, Javascript를 처리한다. 이는 `<script>` 태그의 위치에 따라 블로킹이 발생하여 DOM이 생성이 지연될 수 있다는 것을 의미하고, 따라서  `<script>` 태그의 위치가 중요하다.

body 요소의 가장 아래에 `<script>` 태그를 위치시키는 것이 좋은데, 그 이유는 (1) HTML 요소들이 스크립트 로딩 지연으로 인해 렌더링에 지장을 받지 않아 페이지 로딩 시간이 단축되고 (2) DOM이 완성되지 않은 상태에서 Javascript가 DOM을 조작해 에러가 발생할 우려가 없기 때문이다.