# [Code quality](https://javascript.info/getting-started)

## 3.1) [Debugging in Chrome](https://javascript.info/debugging-chrome)

### Sources 패널 구조

1) 파일 탐색 영역 : 페이지를 구성하는 데 쓰인 모든 리소스 (HTML, JavaScript, CSS, 이미지 파일 등)를 트리 형태로 보여줌

2) 코드 에디터 영역 : 파일 탐색 영역에서 선택한 파일의 소스코드 열람 및 편집 가능

3) 디버깅 영역 : 디버깅과 관련된 기능 제공

### Breakpoint 설정

콘솔의 줄번호를 클릭해 중단점을 설정할 수 있다.

중단점은 말 그대로 자바스크립트의 실행이 중단되는 코드 내 지점을 의미하며, 중단점을 이용해 해당 시점에 실행을 중지해 디버깅을 실시할 수 있다.

디버깅 영역에서 설정된 중단점 목록을 확인할 수 있다.

#### debugger

스크립트 내에 `debugger` 명령어를 적어주면 중단점을 설정한 것과 같은 효과를 볼 수 있다. 에디터 내에서 중단점을 설정할 수 있어 편리하다.

```js
function hello(name) {
  let phrase = `Hello, ${name}!`;

  debugger;

  say(phrase);
}
```

### 디버깅 영역

#### 디버깅 영역의 하위 패널들

1) Watch - 표현식을 평가하고 결과를 보여준다. 표현식은 실행 과정 중 계속해서 재평가된다.
2) Call stack - 실행 경로를 역순으로 표시한다
3) Scope - 현재 정의된 모든 변수를 출력한다

#### 실행 추적을 위한 단축키

`Resume` : 추가 중단점을 만날 때 까지 실행을 재개한다.

`Step` : 다음 명령어를 실행한다. 스크립트 전체를 문 단위로 하나하나 실행할 수 있다. 다음 문이 함수 호출일 경우, 함수 내부로 들어가 함수 본문 첫 번째 줄에서 실행을 멈춘다.

`Step over` : 다음 명령어를 실행하되, 다음 문이 함수 호출일 경우 `Step` 과는 달리 함수 안으로 들어가진 않는다. 중첩 함수를 실행하긴 하되 함수 내로 진입하지 않고, 함수 실행이 끝난 직후에 즉시 멈춘다.

`Step into` : `Step` 과 유사하지만 비동기 함수 내부로도 진입하고, 필요하다면 비동기 동작이 완료될 때까지 대기한다는 차이점이 있다. `Step` 은 비동기 동작은 무시한다.

`Step out` : 실행 중인 함수의 실행이 끝날 때 까지 실행을 계속한다. 현재 실행중인 함수의 실행을 계속 이어가다 함수 본문 마지막 줄에서 실행을 멈춤.

그 외 모든 중단점을 비활성화하는 버튼, 에러 발생 시 코드를 자동중지시켜주는 기능을 활성화하는 버튼 등이 있다.



## 3.2) [Coding Style](https://javascript.info/coding-style)

진정한 프로그래밍 기술은 복잡한 문제를 다른 사람들이 읽기 쉬운 코드로 작성해 해결하는 것.

### 문법

- 최대 가로 길이는 대개 80-120자로 제한하는 것이 일반적이다.
- 변수 선언, 반복문, 리턴문 사이에 줄간격을 두면 코드의 가독성이 좋아진다.

### 함수의 위치

헬퍼 함수 여러개를 만들어 사용하고 있다면, 두 가지 중 한가지 방법을 택해 코드 구조를 정돈하는 것이 좋다.

1. 헬퍼 함수들을 사용하는 코드 위에서 헬퍼 함수들을 모아 선언하기
2. 헬퍼 함수들을 사용하는 코드를 먼저 선언한 뒤, 함수들을 선언하기 (Preferred)

2번이 대개 선호되는 이유는, 잘 짜여진 함수라면 앞서서 선언된 코드에 사용된 헬퍼 함수 이름만 봐도 어떤 역할인지를 알 수 있기 때문에 이후에 나오는 헬퍼 함수의 본문을 읽을 필요도 없기 때문이다.

### 스타일 가이드

코딩 스타일 가이드는 코드를 '어떻게 작성할지' 에 대한 전반적인 규칙을 담은 문서이다.

유명 스타일 가이드:

- [Google의 자바스크립트 스타일 가이드](https://google.github.io/styleguide/javascriptguide.xml)

- [Airbnb의 자바스크립트 스타일 가이드](https://github.com/airbnb/javascript)

- [Idiomatic.JS](https://github.com/rwaldron/idiomatic.js)

- [StandardJS](https://standardjs.com/)

유명 스타일 가이드를 읽다 보면 코드 스타일에 관한 경향과 모범 사례에 대한 최신 정보를 유지할 수 있다.



## 3.3) [Comments](https://javascript.info/comments)

자바스크립트에서 한 줄짜리 주석은 `//` 로, 여러 줄의 주석은  `/* ... */` 로 나타낸다.

좋은 코드엔 주석이 많아선 안된다. 주석 없이 코드 자체만으로 코드가 무슨 일을 하는지 쉽게 이해할 수 있어야 한다.

아래 두 코드를 비교해보며 주석이 필요 없는 좋은 코드 구조에 대해 생각해보자.

🚫

```js
// 위스키를 더해줌
for(let i = 0; i < 10; i++) {
  let drop = getWhiskey();
  smell(drop);
  add(drop, glass);
}

// 주스를 더해줌
for(let t = 0; t < 3; t++) {
  let tomato = getTomato();
  examine(tomato);
  let juice = press(tomato);
  add(juice, glass);
}

// ...
```

✅

```js
addWhiskey(glass);
addJuice(glass);

function addWhiskey(container) {
  for(let i = 0; i < 10; i++) {
    let drop = getWhiskey();
    //...
  }
}

function addJuice(container) {
  for(let t = 0; t < 3; t++) {
    let tomato = getTomato();
    //...
  }
}
```

### 좋은 주석

- 아키텍처를 설명하는 주석 - 고차원 수준 컴포넌트 개요, 컴포넌트 간 상호작용에 대한 설명, 상황에 따른 제어 흐름 등 조감도 역할을 해주는 주석은 좋은 주석이다.
- 함수 용례와 매개변수 정보를 담고 있는 주석 - [JSDoc](http://en.wikipedia.org/wiki/JSDoc) 이라는 특별한 문법을 사용하면 함수에 관한 문서를 쉽게 작성할 수 있다. 
- 왜 이런 방법으로 문제를 해결했는지를 설명하는 주석 - 이전에 했던 실수를 방지하는 안내판 역할을 하는 주석이기에 도움이 된다.



## 3.4) [Ninja code](https://javascript.info/ninja-code)

닌자가 되어보자! 😎 ㅋㅋㅋ재밌는 챕터다.

![유지보수하기 어렵게 코딩하는 방법: 평생 개발자로 먹고 살 수 있다](https://www.hanbit.co.kr/data/ebook/E2375873090_l.jpg)

클린코드는 멍멍이나 줘버리고 평생 개발자로 먹고 살즈아...
유쾌한 개발자들...



## 3.5) [Automated testing with Mocha](https://javascript.info/testing-mocha)

테스트 자동화는 현업에서 광범위하게 쓰인다.

### 테스트의 필요성

개발자는 무엇인가를 만들 때 머릿속에 수많은 유스 케이스를 생각하며 코드를 작성하는데, 코드를 변경할 때 마다 모든 유스 케이스를 상기하면서 코드를 수정하는 것은 불가능하다.

수동으로 코드를 재실행하면서 테스트를 하면 무언가를 놓치기 쉽기에 하나를 고쳤을 때 또 다른 문제가 튀어나오는 것.

테스팅 자동화는 테스트 코드가 실제 동작에 관여하는 코드와 별개로 작성되었을 때 가능하다. 테스트 코드를 이용하면 함수를 다양한 조건에서 실행해 볼 수 있는데, 이때 실행 결과와 기대 결과를 비교할 수 있다.

### BDD (Behavior Driven Development)

BDD에서는 명세서를 먼저 작성하고 난 후게 구현을 시작하며, 구현이 종료된 시점에는 명세서와 코드 둘 다를 확보할 수 있다.

명세서 (Specification) 의 구조는 다음과 같다.

```js
describe("pow", function() {
  it("주어진 숫자의 n 제곱", function() {
    assert.equal(pow(2, 3), 8);
  });
});
```

Spec은 세가지 구성 요소로 이루어진다.

- describe("title", function() {...}) - 구현하고자 하는 기능에 대한 설명
- it("use case 설명" , function() {...}) - 특정 유스 케이스에 대한 설명과, 유스 케이스 테스트 함수
- assert.equal(value1, value2) - pow 함수가 예상한 대로 동작하는지 확인해주는 테스트코드

BDD의 핵심은 실패할 수 밖에 없는 테스트를 추가하고 테스트를 통과할 수 있게 코드를 개선하는 것에 있다.

명세서가 있기 때문에 개발자는 안전하게 함수를 개선하거나 변경할 수 있고, 함수를 처음부터 다시 작성하더라도 명세서가 있다면 기존 코드와 동일하게 동작한다는 것을 보장할 수 있다.

코드가 바뀌어도 기존에 구현된 기능에 영향을 주지 않게 하는 것은 대규모 프로젝트에서 매우 중요하다.



## 3.6) [Polyfills](https://javascript.info/polyfills)

자바스크립트에선 새로운 제안이 정기적으로 등록되고 새로운 기능이 끊임없이 추가된다. 자바스크립트 엔진들은 나름대로의 우선순위를 매겨서 명세서 (혹은 초안) 에 있는 기능들을 구현한다.

엔진별로 어떤 기능을 지원하고 있는지는 https://kangax.github.io/compat-table/es6/에서 확인할 수 있다.

### 바벨

명세서 내 모든 기능을 모든 엔진이 구현하고 있는 것은 아니기 때문에, 특정 엔진에서는 우리가 작성한 코드를 지원하지 않을 수 있다.

이럴 때 바벨을 사용한다.

[바벨(Babel)](https://babeljs.io/)은 [트랜스파일러(transpiler)](https://en.wikipedia.org/wiki/Source-to-source_compiler)로, 모던 자바스크립트 코드를 구 표준을 준수하는 코드로 변경해준다.

#### 바벨의 역할

1. 트랜스파일러 - 바벨은 코드를 재작성해주는 트랜스파일러 프로그램이다. 바벨을 실행하면 개발자의 컴퓨터에 있는 기존 코드가 구 표준을 준수하는 코드로 변경되고, 변경된 코드는 웹사이트 형태로 사용자에게 전달된다.

   [웹팩(webpack)](http://webpack.github.io/)과 같은 모던 프로젝트 빌드 시스템은 코드가 수정될 때마다 자동으로 트랜스파일러를 동작시켜준다.

2. 폴리필 - 명세서엔 새로운 문법이나 기존에 없던 내장 함수에 대한 정의가 추가되곤 한다. 새로운 문법은 트랜스파일러가 구 표준에 맞게 변경해주지만, 새롭게 추가된 함수는 명세서 내 정의를 읽고 직접 함수를 구 표준에 맞게 구현해야 사용할 수 있다.

   이렇게 변경된 표준을 준수할 수 있게 작성된 스크립트를 폴리필이라고 부른다.

   주목할 만한 폴리필 두 가지는 아래와 같다.

   - [core js](https://github.com/zloirock/core-js) - 다양한 폴리필을 제공
   - [polyfill.io](http://polyfill.io/) - 기능이나 사용자의 브라우저에 따라 폴리필 스크립트를 제공

모던 자바스크립트를 이용하려면 트랜스파일러와 폴리필은 필수!